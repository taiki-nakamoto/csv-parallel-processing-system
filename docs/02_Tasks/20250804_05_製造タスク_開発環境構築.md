# CSVファイル並列処理システム 製造タスク_開発環境構築

## 1. ドキュメント情報

| 項目 | 内容 |
|------|------|
| ドキュメント名 | 製造タスク_開発環境構築 |
| バージョン | 1.0 |
| 作成日 | 2025-08-04 |
| 作成者 | システム開発チーム |
| 更新日 | 2025-08-04 |
| 分割元 | 20250804_01_製造タスク管理.md |

## 2. 開発環境構築概要

### 2.1 開発環境構築の位置付け
インフラ製造フェーズ完了後の第三段階として、以下の開発環境構築を実施します：

1. **SAMプロジェクト初期化**: TypeScriptテンプレート、ディレクトリ構成作成
2. **開発環境設定**: ローカル開発環境、設定ファイル作成
3. **CI/CDパイプライン構築**: GitHub Actions ワークフロー設定

### 2.2 参照ドキュメント
- **インフラ製造完了**: `20250804_13_製造タスク_インフラ製造.md`
- **Lambda開発標準**: `02-01_基本設計書_Lambda開発標準仕様書.md`
- **CI/CD設計**: `02-09_基本設計書_CI-CD設計書.md`
- **ローカル環境調査**: `03_Research/20250804_08_AWS開発環境のローカル構築調査.md`

## 3. 開発環境構築フェーズ ⏳未着手

### 3.1 SAMプロジェクト初期化 ⏳未着手

#### SAMアプリケーション作成 ⏳未着手
**参照**: 02-01_基本設計書_Lambda開発標準仕様書.md

- [ ] **`sam init` によるプロジェクト初期化**
  ```bash
  # SAMプロジェクト初期化
  cd csv-parallel-processing-system
  sam init \
    --runtime nodejs22.x \
    --name sam \
    --app-template hello-world-typescript \
    --package-type Zip
  ```

- [ ] **TypeScript テンプレート選択**
  - TypeScript Runtime: nodejs18.x
  - Template: hello-world-typescript
  - Package Type: Zip（Lambda Layersとの互換性）

- [ ] **ディレクトリ構成作成（DDD準拠）**
  ```
  sam/
  ├── src/
  │   ├── controllers/          # プレゼンテーション層
  │   │   ├── CsvValidationController.ts
  │   │   ├── ChunkProcessingController.ts
  │   │   ├── AuditLoggingController.ts
  │   │   ├── ResultAggregationController.ts
  │   │   └── ErrorHandlingController.ts
  │   ├── application/          # アプリケーション層
  │   │   ├── services/
  │   │   │   ├── CsvValidationService.ts
  │   │   │   ├── ChunkProcessingService.ts
  │   │   │   ├── AuditLoggingService.ts
  │   │   │   ├── ResultAggregationService.ts
  │   │   │   └── ErrorHandlingService.ts
  │   │   └── interfaces/
  │   │       ├── ICsvValidationService.ts
  │   │       ├── IChunkProcessingService.ts
  │   │       └── IAuditLoggingService.ts
  │   ├── domain/               # ドメイン層
  │   │   ├── models/          # ドメインモデル
  │   │   │   ├── CsvFile.ts
  │   │   │   ├── ProcessingChunk.ts
  │   │   │   ├── AuditLog.ts
  │   │   │   ├── ProcessingResult.ts
  │   │   │   └── ErrorInfo.ts
  │   │   └── interfaces/      # ドメインインターfaces
  │   │       ├── ICsvValidator.ts
  │   │       ├── IChunkProcessor.ts
  │   │       ├── IAuditLogger.ts
  │   │       └── IErrorHandler.ts
  │   └── infrastructure/      # インフラストラクチャ層
  │       ├── repositories/    # リポジトリ実装
  │       │   ├── S3CsvRepository.ts
  │       │   ├── DynamoDbAuditRepository.ts
  │       │   ├── AuroraDataRepository.ts
  │       │   └── S3ResultRepository.ts
  │       ├── external/        # 外部サービス連携
  │       │   ├── AwsS3Client.ts
  │       │   ├── AwsDynamoDbClient.ts
  │       │   └── AuroraPostgresClient.ts
  │       └── config/          # 設定・環境変数
  │           ├── AppConfig.ts
  │           └── AwsConfig.ts
  ├── layers/                  # Lambda Layers
  │   ├── common-layer/        # 共通ライブラリLayer
  │   │   ├── nodejs/
  │   │   │   └── node_modules/
  │   │   └── package.json
  │   └── business-layer/      # ビジネスロジックLayer
  │       ├── nodejs/
  │       │   └── src/
  │       └── package.json
  ├── tests/                   # テストコード
  │   ├── unit/                # 単体テスト
  │   │   ├── controllers/
  │   │   ├── services/
  │   │   ├── domain/
  │   │   └── repositories/
  │   ├── integration/         # 統合テスト
  │   │   ├── aws-services/
  │   │   └── database/
  │   └── e2e/                 # E2Eテスト
  │       └── stepfunctions/
  ├── events/                  # テスト用イベントファイル
  │   ├── s3-put-event.json
  │   ├── stepfunctions-input.json
  │   └── api-gateway-event.json
  ├── template.yaml           # SAMテンプレート
  ├── samconfig.toml          # SAM設定
  └── package.json            # Node.js依存関係
  ```

#### package.json設定 ⏳未着手
- [ ] **TypeScript依存関係設定**
  ```json
  {
    "name": "csv-processor-lambda",
    "version": "1.0.0",
    "description": "CSV parallel processing system - Lambda functions",
    "scripts": {
      "build": "tsc",
      "test": "jest",
      "test:watch": "jest --watch",
      "test:coverage": "jest --coverage",
      "lint": "eslint src --ext .ts",
      "lint:fix": "eslint src --ext .ts --fix",
      "format": "prettier --write \"src/**/*.ts\"",
      "sam:build": "sam build",
      "sam:local": "sam local start-api",
      "sam:deploy": "sam deploy"
    },
    "dependencies": {
      "@aws-sdk/client-s3": "3.462.0",
      "@aws-sdk/client-dynamodb": "3.462.0",
      "@aws-sdk/lib-dynamodb": "3.462.0",
      "@aws-sdk/client-rds-data": "3.462.0",
      "pg": "^8.11.0",
      "csv-parser": "^3.0.0",
      "uuid": "^9.0.0",
      "joi": "^17.9.0"
    },
    "devDependencies": {
      "@types/node": "^20.5.0",
      "@types/pg": "^8.10.0",
      "@types/uuid": "^9.0.0",
      "@types/jest": "^29.5.0",
      "@typescript-eslint/eslint-plugin": "^6.4.0",
      "@typescript-eslint/parser": "^6.4.0",
      "eslint": "^8.47.0",
      "prettier": "^3.0.0",
      "jest": "^29.6.0",
      "ts-jest": "^29.1.0",
      "typescript": "^5.3.0"
    }
  }
  ```

- [ ] **ESLint、Prettier設定**
  - `.eslintrc.js` 作成
  - `.prettierrc` 作成
  - エディタ設定統一

- [ ] **テストフレームワーク設定（Jest）**
  - `jest.config.js` 作成
  - テストヘルパー関数作成
  - モック設定

- [ ] **AWS SDK v3依存関係設定**
  - S3 Client設定
  - DynamoDB Client設定
  - RDS Data API Client設定

### 3.2 開発環境設定 ⏳未着手

#### ローカル開発環境 ⏳未着手
**参照**: `03_Research/20250804_08_AWS開発環境のローカル構築調査.md`

- [ ] **SAM local環境構築**
  ```bash
  # SAM CLI インストール確認
  sam --version
  
  # SAM local API 起動
  sam local start-api
  
  # SAM local Lambda 起動
  sam local start-lambda
  ```

- [ ] **DynamoDB Local設定**
  ```bash
  # DynamoDB Local JARダウンロード・設定
  mkdir -p local-env/dynamodb-local
  cd local-env/dynamodb-local
  
  # DynamoDB Local JARファイル配置
  # 起動スクリプト作成
  cat > start-dynamodb-local.sh << 'EOF'
  #!/bin/bash
  java -Djava.library.path=./DynamoDBLocal_lib -jar DynamoDBLocal.jar -sharedDb -port 8000
  EOF
  chmod +x start-dynamodb-local.sh
  ```

- [ ] **PostgreSQL ローカル設定（Aurora代替）**
  ```bash
  # PostgreSQL ローカルインストール・設定
  # データベース作成
  createdb csvbatch_local
  
  # 初期スキーマ適用
  psql csvbatch_local < scripts/init-schema.sql
  ```

- [ ] **環境変数設定ファイル作成**
  ```bash
  # .env.local 作成
  cat > .env.local << 'EOF'
  # Local Development Environment
  NODE_ENV=local
  
  # AWS Configuration
  AWS_REGION=ap-northeast-1
  AWS_ACCESS_KEY_ID=local
  AWS_SECRET_ACCESS_KEY=local
  
  # DynamoDB Local
  DYNAMODB_ENDPOINT=http://localhost:8000
  AUDIT_LOGS_TABLE=csv-audit-logs-local
  
  # PostgreSQL Local
  DATABASE_HOST=localhost
  DATABASE_PORT=5432
  DATABASE_NAME=csvbatch_local
  DATABASE_USER=postgres
  DATABASE_PASSWORD=password
  
  # S3 Local (File System)
  S3_ENDPOINT=http://localhost:9000
  INPUT_BUCKET=csv-input-files-local
  PROCESSED_BUCKET=csv-processed-files-local
  ERROR_BUCKET=csv-error-files-local
  
  # Logging
  LOG_LEVEL=debug
  EOF
  ```

#### 設定ファイル作成 ⏳未着手
- [ ] **`samconfig.toml` 作成（環境別設定）**
  ```toml
  version = 0.1
  
  [default]
  [default.build.parameters]
  cached = true
  parallel = true
  
  [default.deploy.parameters]
  stack_name = "csv-batch-sam-stack"
  s3_bucket = "naka-sam-artifacts"
  s3_prefix = "05_csv-batch/dev"
  region = "ap-northeast-1"
  capabilities = "CAPABILITY_IAM"
  parameter_overrides = [
    "Environment=dev"
  ]
  
  [prod]
  [prod.deploy.parameters]
  stack_name = "csv-batch-sam-stack-prod"
  s3_bucket = "naka-sam-artifacts"
  s3_prefix = "05_csv-batch/prod"
  region = "ap-northeast-1"
  capabilities = "CAPABILITY_IAM"
  parameter_overrides = [
    "Environment=prod"
  ]
  ```

- [ ] **TypeScript設定 (`tsconfig.json`)**
  ```json
  {
    "compilerOptions": {
      "target": "ES2020",
      "module": "commonjs",
      "lib": ["ES2020"],
      "strict": true,
      "esModuleInterop": true,
      "skipLibCheck": true,
      "forceConsistentCasingInFileNames": true,
      "outDir": "./dist",
      "rootDir": "./src",
      "declaration": true,
      "sourceMap": true,
      "experimentalDecorators": true,
      "emitDecoratorMetadata": true,
      "resolveJsonModule": true,
      "paths": {
        "@/*": ["./src/*"],
        "@controllers/*": ["./src/controllers/*"],
        "@services/*": ["./src/application/services/*"],
        "@domain/*": ["./src/domain/*"],
        "@infrastructure/*": ["./src/infrastructure/*"]
      }
    },
    "include": ["src/**/*"],
    "exclude": ["node_modules", "dist", "tests"]
  }
  ```

- [ ] **ESLint設定 (`.eslintrc.js`)**
  ```javascript
  module.exports = {
    parser: '@typescript-eslint/parser',
    extends: [
      'eslint:recommended',
      '@typescript-eslint/recommended',
    ],
    parserOptions: {
      ecmaVersion: 2020,
      sourceType: 'module',
    },
    rules: {
      '@typescript-eslint/no-unused-vars': 'error',
      '@typescript-eslint/explicit-function-return-type': 'warn',
      '@typescript-eslint/no-explicit-any': 'warn',
      'prefer-const': 'error',
      'no-var': 'error',
    },
  };
  ```

- [ ] **Prettier設定 (`.prettierrc`)**
  ```json
  {
    "semi": true,
    "trailingComma": "es5",
    "singleQuote": true,
    "printWidth": 100,
    "tabWidth": 2,
    "useTabs": false
  }
  ```

- [ ] **Jest設定 (`jest.config.js`)**
  ```javascript
  module.exports = {
    preset: 'ts-jest',
    testEnvironment: 'node',
    roots: ['<rootDir>/src', '<rootDir>/tests'],
    testMatch: ['**/__tests__/**/*.ts', '**/?(*.)+(spec|test).ts'],
    transform: {
      '^.+\\.ts$': 'ts-jest',
    },
    collectCoverageFrom: [
      'src/**/*.ts',
      '!src/**/*.d.ts',
    ],
    coverageDirectory: 'coverage',
    coverageReporters: ['text', 'lcov', 'html'],
    moduleNameMapping: {
      '^@/(.*)$': '<rootDir>/src/$1',
      '^@controllers/(.*)$': '<rootDir>/src/controllers/$1',
      '^@services/(.*)$': '<rootDir>/src/application/services/$1',
      '^@domain/(.*)$': '<rootDir>/src/domain/$1',
      '^@infrastructure/(.*)$': '<rootDir>/src/infrastructure/$1',
    },
  };
  ```

#### DIP（依存性逆転の原則）実装手順詳細化 ⏳未着手
**参照**: 02-01_基本設計書_Lambda開発標準仕様書.md

- [ ] **DIコンテナ設定**
  ```typescript
  // src/infrastructure/config/DIContainer.ts
  import { Container } from 'inversify';
  import { ICsvValidationService } from '@/application/interfaces/ICsvValidationService';
  import { CsvValidationService } from '@/application/services/CsvValidationService';
  
  export class DIContainer {
    private container: Container;
    
    constructor() {
      this.container = new Container();
      this.configureServices();
    }
    
    private configureServices(): void {
      // Service登録
      this.container.bind<ICsvValidationService>('CsvValidationService')
        .to(CsvValidationService);
    }
    
    public get<T>(serviceIdentifier: string): T {
      return this.container.get<T>(serviceIdentifier);
    }
  }
  ```

- [ ] **インターフェース設計**
  ```typescript
  // src/application/interfaces/ICsvValidationService.ts
  export interface ICsvValidationService {
    validateCsv(s3Object: S3Object): Promise<ValidationResult>;
  }
  
  // src/domain/interfaces/ICsvValidator.ts
  export interface ICsvValidator {
    validate(csvData: CsvData): Promise<ValidationResult>;
  }
  
  // src/infrastructure/interfaces/IValidationRepository.ts
  export interface IValidationRepository {
    getCsvData(s3Object: S3Object): Promise<CsvData>;
  }
  ```

- [ ] **レイヤー間の依存関係実装**
  ```typescript
  // src/application/services/CsvValidationService.ts
  export class CsvValidationService implements ICsvValidationService {
    constructor(
      private csvValidator: ICsvValidator,
      private validationRepository: IValidationRepository
    ) {}
    
    public async validateCsv(s3Object: S3Object): Promise<ValidationResult> {
      const csvData = await this.validationRepository.getCsvData(s3Object);
      return await this.csvValidator.validate(csvData);
    }
  }
  ```

### 3.3 CI/CD パイプライン構築 ⏳未着手

#### GitHub Actions ワークフロー作成 ⏳未着手
**参照**: 02-09_基本設計書_CI-CD設計書.md

- [ ] **`.github/workflows/pr-check.yml`**
  ```yaml
  name: Pull Request Check
  
  on:
    pull_request:
      branches: [ main, develop ]
      paths:
        - 'sam/**'
        - 'terraform/**'
        - '.github/workflows/**'
  
  jobs:
    typescript-check:
      name: TypeScript Check
      runs-on: ubuntu-latest
      steps:
        - uses: actions/checkout@v4
        
        - name: Setup Node.js
          uses: actions/setup-node@v4
          with:
            node-version: '22'
            cache: 'npm'
            cache-dependency-path: sam/package-lock.json
            
        - name: Install dependencies
          run: |
            cd sam
            npm ci
            
        - name: TypeScript compile check
          run: |
            cd sam
            npm run build
            
        - name: ESLint check
          run: |
            cd sam
            npm run lint
            
        - name: Run unit tests
          run: |
            cd sam
            npm run test:coverage
            
        - name: Upload coverage reports
          uses: codecov/codecov-action@v3
          with:
            file: sam/coverage/lcov.info
  
    sam-build-check:
      name: SAM Build Check
      runs-on: ubuntu-latest
      steps:
        - uses: actions/checkout@v4
        
        - name: Setup SAM CLI
          uses: aws-actions/setup-sam@v2
          
        - name: SAM Build
          run: |
            cd sam
            sam build --use-container
            
        - name: SAM Validate
          run: |
            cd sam
            sam validate
  
    terraform-check:
      name: Terraform Check
      runs-on: ubuntu-latest
      steps:
        - uses: actions/checkout@v4
        
        - name: Setup Terraform
          uses: hashicorp/setup-terraform@v2
          with:
            terraform_version: 1.5.0
            
        - name: Terraform Format Check
          run: terraform fmt -check -recursive terraform/
          
        - name: Terraform Init
          run: |
            cd terraform/environments/dev
            terraform init -backend=false
            
        - name: Terraform Validate
          run: |
            cd terraform/environments/dev
            terraform validate
  ```

- [ ] **`.github/workflows/dev-deploy.yml`**
  ```yaml
  name: Deploy to Development
  
  on:
    push:
      branches: [ develop ]
      paths:
        - 'sam/**'
        - 'terraform/**'
  
  env:
    AWS_REGION: ${{ secrets.AWS_REGION }}
  
  jobs:
    deploy-infrastructure:
      name: Deploy Infrastructure
      runs-on: ubuntu-latest
      outputs:
        deployment-status: ${{ steps.terraform.outcome }}
      steps:
        - uses: actions/checkout@v4
        
        - name: Configure AWS credentials
          uses: aws-actions/configure-aws-credentials@v2
          with:
            aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}
            aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
            aws-region: ${{ secrets.AWS_REGION }}
            
        - name: Setup Terraform
          uses: hashicorp/setup-terraform@v2
          with:
            terraform_version: 1.5.0
            
        - name: Terraform Init
          run: |
            cd terraform/environments/dev
            terraform init
            
        - name: Terraform Plan
          run: |
            cd terraform/environments/dev
            terraform plan -out=tfplan
            
        - name: Terraform Apply
          id: terraform
          run: |
            cd terraform/environments/dev
            terraform apply -auto-approve tfplan
  
    deploy-lambda:
      name: Deploy Lambda Functions
      needs: deploy-infrastructure
      if: needs.deploy-infrastructure.outputs.deployment-status == 'success'
      runs-on: ubuntu-latest
      steps:
        - uses: actions/checkout@v4
        
        - name: Configure AWS credentials
          uses: aws-actions/configure-aws-credentials@v2
          with:
            aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}
            aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
            aws-region: ${{ secrets.AWS_REGION }}
            
        - name: Setup Node.js
          uses: actions/setup-node@v4
          with:
            node-version: '22'
            cache: 'npm'
            cache-dependency-path: sam/package-lock.json
            
        - name: Setup SAM CLI
          uses: aws-actions/setup-sam@v2
          
        - name: Install dependencies
          run: |
            cd sam
            npm ci
            
        - name: Build and Deploy SAM
          run: |
            cd sam
            sam build --use-container
            sam deploy --no-confirm-changeset --no-fail-on-empty-changeset
            
        - name: Run integration tests
          run: |
            cd sam
            npm run test:integration
  ```

- [ ] **`.github/workflows/prod-deploy.yml`**
  ```yaml
  name: Deploy to Production
  
  on:
    push:
      branches: [ main ]
      paths:
        - 'sam/**'
        - 'terraform/**'
    workflow_dispatch:
      inputs:
        deploy_environment:
          description: 'Deployment environment'
          required: true
          default: 'prod'
  
  env:
    AWS_REGION: ${{ secrets.AWS_REGION }}
  
  jobs:
    deploy-production:
      name: Deploy to Production
      runs-on: ubuntu-latest
      environment: production
      steps:
        - uses: actions/checkout@v4
        
        - name: Configure AWS credentials
          uses: aws-actions/configure-aws-credentials@v2
          with:
            aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}
            aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
            aws-region: ${{ secrets.AWS_REGION }}
            
        - name: Deploy Infrastructure
          run: |
            cd terraform/environments/prod
            terraform init
            terraform plan -out=tfplan
            terraform apply -auto-approve tfplan
            
        - name: Deploy Lambda Functions
          run: |
            cd sam
            sam build --use-container
            sam deploy --config-env prod --no-confirm-changeset
            
        - name: Health Check
          run: |
            # API ヘルスチェック実行
            curl -f https://api.example.com/health || exit 1
            
        - name: Rollback on failure
          if: failure()
          run: |
            cd sam
            # 前のバージョンにロールバック処理
            echo "Rollback procedure would be executed here"
  ```

## 4. 開発環境構築実行順序

### 4.1 Phase 1: SAMプロジェクト基盤（推定時間: 2時間）
1. **SAM初期化・ディレクトリ構成** (60分)
   - sam init実行
   - DDD準拠ディレクトリ構造作成
   - 基本ファイル配置

2. **package.json・依存関係設定** (60分)
   - TypeScript依存関係設定
   - AWS SDK v3設定
   - 開発ツール設定

### 4.2 Phase 2: 開発環境設定（推定時間: 2.5時間）
1. **ローカル開発環境構築** (90分)
   - DynamoDB Local設定
   - PostgreSQL ローカル設定
   - 環境変数設定

2. **設定ファイル作成** (60分)
   - TypeScript、ESLint、Prettier設定
   - Jest設定
   - SAM設定

### 4.3 Phase 3: CI/CDパイプライン（推定時間: 2時間）
1. **GitHub Actionsワークフロー作成** (90分)
   - PR チェックワークフロー
   - 開発環境デプロイワークフロー
   - 本番環境デプロイワークフロー

2. **パイプライン動作確認** (30分)
   - 初回プルリクエスト作成
   - CI/CD動作確認

### 4.4 Phase 4: 動作確認（推定時間: 1時間）
1. **ローカル環境動作確認** (30分)
2. **CI/CDパイプライン確認** (30分)

**合計推定時間**: **7.5時間**

## 5. 完了確認項目

### 5.1 SAMプロジェクト確認
- [ ] sam init が正常完了している
- [ ] ディレクトリ構造がDDD準拠で作成されている
- [ ] package.json が適切に設定されている
- [ ] 依存関係が正常にインストールされている

### 5.2 開発環境確認
- [ ] DynamoDB Local が起動できる
- [ ] PostgreSQL ローカル接続が正常
- [ ] sam local が正常動作する
- [ ] 環境変数が適切に設定されている

### 5.3 設定ファイル確認
- [ ] TypeScript コンパイルが正常
- [ ] ESLint チェックが正常
- [ ] Prettier フォーマットが正常
- [ ] Jest テストが実行できる

### 5.4 CI/CD確認
- [ ] プルリクエストでCI が動作する
- [ ] developブランチでデプロイが動作する
- [ ] GitHub Actions Secretsが正常参照される
- [ ] テストカバレッジが取得できる

## 6. 次のステップ

### 6.1 開発環境構築完了後
✅ SAMプロジェクト初期化完了  
✅ ローカル開発環境設定完了  
✅ CI/CDパイプライン構築完了  

### 6.2 次の製造項目
1. **ソースコード製造開始**（次のタスク）
   - Lambda関数実装
   - Step Functions実装
   - Layer実装

2. **テスト製造**
   - 単体テスト実装
   - 統合テスト実装
   - E2Eテスト実装

### 6.3 開発開始準備
開発環境構築完了により、以下が可能になります：
- Lambda関数のローカル開発・テスト
- SAMによるデプロイ・動作確認
- GitHub Actions による自動CI/CD
- コード品質の自動チェック

## 7. ローカル開発手順

### 7.1 開発環境起動手順
```bash
# 1. DynamoDB Local 起動
cd local-env/dynamodb-local
./start-dynamodb-local.sh

# 2. PostgreSQL 起動確認
pg_ctl status

# 3. SAM Local API 起動
cd sam
sam local start-api --env-vars env.json

# 4. 別ターミナルでSAM Local Lambda 起動
sam local start-lambda --env-vars env.json
```

### 7.2 開発ワークフロー
```bash
# 1. 機能ブランチ作成
git checkout develop
git pull origin develop
git checkout -b feature/csv-validation

# 2. コード実装
npm run build    # TypeScript コンパイル
npm run lint     # ESLint チェック
npm run test     # テスト実行

# 3. SAM ローカルテスト
sam local invoke CsvProcessorFunction --event events/s3-put-event.json

# 4. プルリクエスト作成
git add .
git commit -m "feat: CSV validation logic implementation"
git push -u origin feature/csv-validation
# GitHub でプルリクエスト作成
```

### 7.3 デバッグ手順
```bash
# 1. ログ確認
sam logs -n CsvProcessorFunction --tail

# 2. ローカルAPI テスト
curl -X POST http://localhost:3000/process-csv \
  -H "Content-Type: application/json" \
  -d '{"bucket": "test-bucket", "key": "test.csv"}'

# 3. DynamoDB Local データ確認
aws dynamodb scan \
  --table-name csv-audit-logs-local \
  --endpoint-url http://localhost:8000
```

## 8. 関連ドキュメント

### 8.1 前段階ドキュメント
- `20250804_13_製造タスク_インフラ製造.md` - インフラ製造（前段階）

### 8.2 次段階ドキュメント
- `20250804_15_製造タスク_後続フェーズ.md` - ソースコード製造以降

### 8.3 参照設計書
- `02-01_基本設計書_Lambda開発標準仕様書.md` - Lambda開発標準
- `02-09_基本設計書_CI-CD設計書.md` - CI/CD設計
- `03_Research/20250804_08_AWS開発環境のローカル構築調査.md` - ローカル環境調査

---

**最終更新**: 2025-08-04  
**ステータス**: ⏳開発環境構築未着手  
**次のアクション**: SAMプロジェクト初期化開始  
**推定作業時間**: 7.5時間